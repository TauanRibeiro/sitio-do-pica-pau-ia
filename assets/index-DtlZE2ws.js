const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/audioEngine-B1olB8TK.js","assets/audio-BwtH1A1C.js","assets/vendor-C1XDGt3J.js","assets/MemoryGame-D3TyZbAr.js","assets/ui-Dn30SOU1.js","assets/MemoryGame-COQqz_tv.css","assets/index-BKTQQ-Ee.js"])))=>i.map(i=>d[i]);
import{r as c,j as t}from"./ui-Dn30SOU1.js";import{a as fe}from"./vendor-C1XDGt3J.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))b(m);new MutationObserver(m=>{for(const f of m)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&b(x)}).observe(document,{childList:!0,subtree:!0});function h(m){const f={};return m.integrity&&(f.integrity=m.integrity),m.referrerPolicy&&(f.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?f.credentials="include":m.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function b(m){if(m.ep)return;m.ep=!0;const f=h(m);fetch(m.href,f)}})();var U={},re;function ge(){if(re)return U;re=1;var s=fe();return U.createRoot=s.createRoot,U.hydrateRoot=s.hydrateRoot,U}var xe=ge();const ve="modulepreload",ye=function(s){return"/sitio-do-pica-pau-ia/"+s},oe={},O=function(p,h,b){let m=Promise.resolve();if(h&&h.length>0){let j=function(v){return Promise.all(v.map(D=>Promise.resolve(D).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),N=x?.nonce||x?.getAttribute("nonce");m=j(h.map(v=>{if(v=ye(v),v in oe)return;oe[v]=!0;const D=v.endsWith(".css"),M=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${M}`))return;const T=document.createElement("link");if(T.rel=D?"stylesheet":ve,D||(T.as="script"),T.crossOrigin="",T.href=v,N&&T.setAttribute("nonce",N),document.head.appendChild(T),D)return new Promise((z,I)=>{T.addEventListener("load",z),T.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${v}`)))})}))}function f(x){const N=new Event("vite:preloadError",{cancelable:!0});if(N.payload=x,window.dispatchEvent(N),!N.defaultPrevented)throw x}return m.then(x=>{for(const N of x||[])N.status==="rejected"&&f(N.reason);return p().catch(f)})};function be(s){const p=document.querySelector(".achievement-notification");p&&p.remove();const h=document.createElement("div");h.className="achievement-notification",h.innerHTML=`
    <div class="notification-title">üèÜ Conquista Desbloqueada!</div>
    <div class="notification-title">${s.title}</div>
    <div class="notification-desc">${s.description}</div>
  `,document.body.appendChild(h),setTimeout(()=>{h.parentNode&&h.parentNode.removeChild(h)},4e3),se()}async function se(){try{const{getAudioEngine:s}=await O(async()=>{const{getAudioEngine:h}=await import("./audioEngine-B1olB8TK.js");return{getAudioEngine:h}},__vite__mapDeps([0,1,2]));s().playAchievementUnlock()}catch{try{const s=await O(()=>import("./audio-BwtH1A1C.js").then(f=>f.i),__vite__mapDeps([1,2]));await s.start();const p=new s.PolySynth().toDestination(),h=new s.Reverb({decay:1.5,wet:.3}).toDestination();p.connect(h);const b=s.now();["C5","E5","G5","C6"].forEach((f,x)=>{p.triggerAttackRelease(f,"8n",b+x*.1)}),setTimeout(()=>{p.dispose(),h.dispose()},1e3)}catch{}}}function we(s,p=1,h="increment"){const b=JSON.parse(localStorage.getItem("gameStats")||"{}");switch(h){case"increment":b[s]=(b[s]||0)+p;break;case"set":b[s]=p;break;case"max":b[s]=Math.max(b[s]||0,p);break;case"min":b[s]=Math.min(b[s]||1/0,p);break;case"flag":b[s]=!0;break}return localStorage.setItem("gameStats",JSON.stringify(b)),b}function Fe(){return JSON.parse(localStorage.getItem("gameStats")||"{}")}window.showAchievementNotification=be;window.updateStats=we;window.getStats=Fe;window.playAchievementSound=se;const ie="siteTheme";function je(){return typeof window>"u"||!window.matchMedia?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function le(){try{const s=localStorage.getItem(ie);if(s==="light"||s==="dark")return s}catch{}return je()}function ce(s){document.documentElement.setAttribute("data-theme",s);try{localStorage.setItem(ie,s)}catch{}}function ne(){const p=(document.documentElement.getAttribute("data-theme")||le())==="dark"?"light":"dark";return ce(p),p}const ke=c.lazy(()=>O(()=>import("./MemoryGame-D3TyZbAr.js"),__vite__mapDeps([3,4,2,5])));function Ne(){const[s,p]=c.useState(!1),[h,b]=c.useState(!1),[m,f]=c.useState(!1),[x,N]=c.useState(null),[j,v]=c.useState("home"),[D,M]=c.useState(le()),[T,z]=c.useState(()=>localStorage.getItem("memoryDifficulty")||"easy"),[I,Y]=c.useState([]),[$,H]=c.useState(null),[A,X]=c.useState(!0),B=c.useRef(null),S=c.useRef(null),q=c.useRef(null),R=c.useRef([]),[de]=c.useState(new Array(12).fill(4)),[_,me]=c.useState(!1),[Q,K]=c.useState([]),[Z,ee]=c.useState([]);c.useEffect(()=>{async function e(){try{x&&x.getTracks().forEach(i=>i.stop());const r=$?{video:{deviceId:{exact:$}}}:{video:{facingMode:{ideal:"environment"}}},o=await navigator.mediaDevices.getUserMedia(r);N(o),S.current&&(S.current.srcObject=o,S.current.style.transform=_?"scaleX(-1)":"none");const n=(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="videoinput");Y(n),!$&&n.length>0&&H(n[0].deviceId)}catch(r){try{const o=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"user"}}});N(o),S.current&&(S.current.srcObject=o);const n=(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="videoinput");Y(n),!$&&n.length>0&&H(n[0].deviceId)}catch(o){alert("Erro ao acessar a c√¢mera: "+(r?.message||o?.message))}}}return s?e():x&&(x.getTracks().forEach(r=>r.stop()),N(null)),()=>{x&&x.getTracks().forEach(r=>r.stop())}},[s,$,_,x]),c.useEffect(()=>(ce(D),()=>{}),[D]),c.useEffect(()=>{S.current&&(S.current.style.transform=_?"scaleX(-1)":"none")},[_]),c.useEffect(()=>{j!=="vision"&&(s&&p(!1),h&&b(!1))},[j,s,h]),c.useEffect(()=>{const e=r=>{const o=r?.detail;o==="vision"&&v("vision"),o==="game"&&v("game")};return window.addEventListener("sitio:navigate",e),()=>window.removeEventListener("sitio:navigate",e)},[]);const C=c.useRef(null),[V,ue]=c.useState(!1),[G,te]=c.useState(!1),ae=c.useRef(0);c.useEffect(()=>{if(!A||V)return;const e="/sitio-do-pica-pau-ia/aiWorker.js";C.current=new Worker(e),C.current.onmessage=r=>{const{type:o,embedding:a,norm:n,templateIndex:i,matches:l}=r.data;switch(o){case"AI_READY":ue(!0);break;case"EMBEDDING_READY":i!==void 0&&R.current[i]&&(R.current[i].embedding=a,R.current[i].embeddingNorm=n);break;case"SIMILARITY_READY":if(l&&l.length>0){const u=l.map(k=>k.index);K(u)}else K([]);break}};try{C.current.postMessage({type:"INIT_AI"})}catch{}},[s,A,V]),c.useEffect(()=>{if(!s)return;let e=null,r=0,o=ae.current||0;const a=()=>{const n=S.current,i=q.current;if(n&&i){const l=i.getContext("2d"),{videoWidth:u,videoHeight:k}=n;if(u&&k){i.width=480,i.height=Math.round(k/u*480),l.save(),_&&(l.scale(-1,1),l.translate(-i.width,0)),l.drawImage(n,0,0,i.width,i.height),l.restore();try{const g=l.getImageData(Math.max(0,Math.floor(i.width/2-8)),Math.max(0,Math.floor(i.height/2-8)),16,16);let F=0;for(let y=0;y<g.data.length;y+=4)F+=g.data[y]+g.data[y+1]+g.data[y+2];F/(g.data.length/4)/3<40?o=Math.min(o+1,60):o=Math.max(o-1,0),o>12&&!G&&te(!0),o<6&&G&&te(!1),ae.current=o}catch{}const d=performance.now();if(A&&C.current&&V&&d-r>350){r=d;try{const F=Math.floor((i.width-128)/2),E=Math.floor((i.height-128)/2),y=l.getImageData(F,E,128,128);R.current.length>0&&C.current.postMessage({type:"COMPARE_SIMILARITY",imageData:y,templates:R.current.filter(P=>P.embedding&&P.embeddingNorm)})}catch{}}}}e=requestAnimationFrame(a)};return e=requestAnimationFrame(a),()=>{e&&cancelAnimationFrame(e)}},[s,A,V,_,G]),c.useEffect(()=>{const e={ctxStarted:!1,Tone:null,Soundfont:null,parts:{},tempo:85,key:"G",scale:["G","A","B","C","D","E","F#"],state:"exploration",loop:null,melodyPart:null,percussionPart:null,victoryPart:null,sf:{viola:null,flauta:null,harmonica:null},isPlaying:!1,isReady:!1,setup:async()=>{if(e.Tone||(e.Tone=await O(()=>import("./audio-BwtH1A1C.js").then(l=>l.i),__vite__mapDeps([1,2]))),!e.Soundfont)try{const l=await O(()=>import("./index-BKTQQ-Ee.js").then(u=>u.i),__vite__mapDeps([6,2,1]));e.Soundfont=l.default}catch{}try{e.ctxStarted=e.Tone.getContext().state==="running"}catch{e.ctxStarted=!1}const r=new e.Tone.Filter({frequency:3e3,type:"lowpass",rolloff:-12}).toDestination(),o=new e.Tone.EQ3({low:4,mid:3,high:-1}).connect(r),a=new e.Tone.Compressor({threshold:-18,ratio:3,attack:.1,release:.8}).connect(o);e.parts.viola=new e.Tone.PolySynth(e.Tone.Synth,{oscillator:{type:"triangle",modulationType:"sine",modulationFrequency:.2},envelope:{attack:.02,decay:.4,sustain:.6,release:1.5},filter:{frequency:1500,rolloff:-12}}).connect(a),e.parts.viola.volume.value=-10,e.parts.baixo=new e.Tone.MonoSynth({oscillator:{type:"triangle"},filter:{Q:2,type:"lowpass",rolloff:-24,frequency:250},envelope:{attack:.08,decay:.6,sustain:.4,release:2}}).connect(a),e.parts.baixo.volume.value=-8,e.parts.pandeiro=new e.Tone.NoiseSynth({noise:{type:"pink"},envelope:{attack:.005,decay:.08,sustain:0,release:.03},filter:{frequency:600,rolloff:-12}}).connect(a),e.parts.pandeiro.volume.value=-20,e.parts.triangulo=new e.Tone.MetalSynth({frequency:400,envelope:{attack:.001,decay:.15,sustain:0,release:.4},harmonicity:8,modulationIndex:12,resonance:1200}).connect(a),e.parts.triangulo.volume.value=-24,e.parts.flauta=new e.Tone.Synth({oscillator:{type:"sine",modulationType:"sine",modulationFrequency:.5},envelope:{attack:.1,decay:.3,sustain:.8,release:1.2},filter:{frequency:2200,rolloff:-6}}).connect(a),e.parts.flauta.volume.value=-12;try{const l=e.Tone.getContext().rawContext;e.Soundfont&&(e.sf.viola=await e.Soundfont.instrument(l,"acoustic_guitar_nylon"),e.sf.flauta=await e.Soundfont.instrument(l,"flute"),e.sf.harmonica=await e.Soundfont.instrument(l,"harmonica"),e.sf.accordion=await e.Soundfont.instrument(l,"accordion"),e.sf.violao=await e.Soundfont.instrument(l,"acoustic_guitar_steel"))}catch{console.log("üéµ Timbres do S√≠tio: usando sintetizadores como fallback")}const n=new e.Tone.Reverb({roomSize:.6,dampening:3e3,wet:.15}).connect(a),i=new e.Tone.FeedbackDelay({delayTime:"8n",feedback:.2,wet:.08}).connect(n);e.parts.flauta.connect(i),e.parts.viola.connect(n),e.Tone.Transport.bpm.value=e.tempo},pickState:(r,o={})=>{const a={exploration:{tempo:[80,88],layers:["viola","baixo"],progression:["I","vi","IV","V"],feel:"toada",swing:.1},puzzle:{tempo:[75,82],layers:["viola","baixo","flauta"],progression:["I","V/vi","vi","IV"],feel:"moda",swing:.05},action:{tempo:[88,96],layers:["viola","baixo","pandeiro","triangulo"],progression:["I","bVII","IV","I"],feel:"baiao",swing:.15},victory:{tempo:[95,105],layers:["viola","baixo","pandeiro","triangulo","flauta"],progression:["I","V","vi","IV","I","V","I"],feel:"festa",swing:.2},tension:{tempo:[70,75],layers:["viola"],progression:["vi","V/vi","vi"],feel:"suspense",swing:.02},reset:{tempo:[78,85],layers:["flauta","baixo"],progression:["I","vi","IV","V"],feel:"renovacao",swing:.08}},n=a[r]||a.exploration;if(o.difficulty)switch(o.difficulty){case"hard":n.tempo=[n.tempo[0]+8,n.tempo[1]+12],n.layers.length<4&&n.layers.push("triangulo");break;case"medium":n.tempo=[n.tempo[0]+3,n.tempo[1]+5];break}if(o.streak){const i=Math.min(o.streak*2,15);n.tempo=[n.tempo[0]+i,n.tempo[1]+i]}return e.state=r,e.tempo=Math.round((n.tempo[0]+n.tempo[1])/2),e.Tone.Transport.bpm.rampTo(e.tempo,r==="victory"?2:1),e.Tone.Transport.swing=n.swing,n},note:(r,o=3)=>{const a=e.scale,i={1:0,2:1,3:2,4:3,5:4,6:5,7:6}[r]??0;return`${a[i]}${o}`},chord:(r,o=4)=>({I:[1,3,5],vi:[6,1,3],IV:[4,6,1],V:[5,7,2],"V/vi":[2,4,6],bVII:[7,2,4],II7:[2,4,6,1],V7:[5,7,2,4],VI7:[6,1,3,5]}[r]||[1,3,5]).map(i=>e.note((i-1)%7+1,o)),ensureStart:async()=>{e.Tone||(e.Tone=await O(()=>import("./audio-BwtH1A1C.js").then(r=>r.i),__vite__mapDeps([1,2])));try{e.Tone.getContext().state==="suspended"&&await e.Tone.start(),e.ctxStarted=!0,e.isReady=!0}catch{}},start:async(r="exploration",o={})=>{await e.setup();try{e.Tone.getContext().state==="suspended"&&(await e.Tone.start(),e.ctxStarted=!0)}catch{}const a=e.pickState(r,o);e.loop&&(e.loop.dispose(),e.loop=null),e.percussionPart&&(e.percussionPart.dispose(),e.percussionPart=null),e.victoryPart&&(e.victoryPart.dispose(),e.victoryPart=null);let n=0;e.loop=new e.Tone.Loop(i=>{const l=n%a.progression.length,u=e.chord(a.progression[l],4),k=u[0].replace(/\d+$/,"2");if(a.layers.includes("viola")&&(a.feel==="baiao"?[0,.75,1.5,2,2.75,3.5]:[0,.5,1,1.5,2.5,3,3.5]).forEach((w,g)=>{const F=i+w,E=Math.floor(w/2)%u.length,y=u[E],P=g%2===0,W=P?.5:.3,L=P?0:.02;let J=W;a.feel==="festa"&&(J*=1.3),a.feel==="suspense"&&(J*=.4),e.sf.viola?e.sf.viola.play(y,e.Tone.now()+w+L,{duration:a.feel==="moda"?.4:.25,gain:J+Math.sin(n*.5)*.05}):e.parts.viola.triggerAttackRelease(y,"8n",F+L)}),a.layers.includes("baixo")){let d;switch(a.feel){case"baiao":case"festa":d=[{beat:0,note:k,duration:"4n"},{beat:1,note:u[2].replace(/\d+$/,"2"),duration:"8n"},{beat:2.5,note:k,duration:"8n"},{beat:3.5,note:u[1].replace(/\d+$/,"2"),duration:"8n"}],a.feel==="festa"&&d.push({beat:1.5,note:u[1].replace(/\d+$/,"2"),duration:"16n"});break;case"moda":d=[{beat:0,note:k,duration:"2n"},{beat:2,note:u[2].replace(/\d+$/,"2"),duration:"4n"}];break;case"suspense":d=[{beat:0,note:k,duration:"1n"}];break;case"renovacao":d=[{beat:0,note:k,duration:"2n."},{beat:3,note:u[2].replace(/\d+$/,"2"),duration:"4n"}];break;default:d=[{beat:0,note:k,duration:"4n"},{beat:2,note:k,duration:"4n"}]}d.forEach(({beat:w,note:g,duration:F})=>{const E=w%1!==0?.03:0;e.parts.baixo.triggerAttackRelease(g,F,i+w+E)})}if(a.layers.includes("pandeiro")){let d=[0,.75,1.25,2,2.75,3.5];a.feel==="festa"&&(d=[0,.5,.75,1,1.25,1.5,2,2.25,2.5,2.75,3,3.25,3.5,3.75]),d.forEach(w=>{const g=w%2===0?.6:.3,F=a.feel==="festa"?g*1.4:g;e.parts.pandeiro.triggerAttackRelease("16n",i+w),e.parts.pandeiro.volume.rampTo(-20+F*4,.01)})}if(a.layers.includes("triangulo")){let d=[.5,1.5,2.5,3.5];a.feel==="festa"&&(d=[.25,.5,.75,1.25,1.5,1.75,2.25,2.5,2.75,3.25,3.5,3.75]),d.forEach(w=>{const g=a.feel==="festa"?["C6","D6","E6"][Math.floor(Math.random()*3)]:"C6";e.parts.triangulo.triggerAttackRelease(g,"32n",i+w)})}if(a.layers.includes("flauta")){let d=n%2===0;a.feel==="festa"&&(d=!0),a.feel==="suspense"&&(d=n%4===0),a.feel==="renovacao"&&(d=n%3===0),d&&u.slice(0,3).forEach((g,F)=>{const E=i+F*.5;let y=g.replace(/\d+$/,"5");a.feel==="festa"&&Math.random()>.5&&(y=g.replace(/\d+$/,"6")),a.feel==="suspense"&&(y=g.replace(/\d+$/,"4"));const P=a.feel==="festa"?.5:a.feel==="suspense"?.2:.35;e.sf.flauta?e.sf.flauta.play(y,e.Tone.now()+F*.5,{duration:.8,gain:P}):e.parts.flauta.triggerAttackRelease(y,"2n",E)})}n++},"1m"),e.loop.start(0);try{e.Tone.getContext().state==="running"&&e.Tone.Transport.start()}catch{}e.isPlaying=!0},playVictoryMelody:()=>{e.victoryPart&&(e.victoryPart.dispose(),e.victoryPart=null);const r=[1,1,2,1,4,3,1,1,2,1,5,4,1,1,8,6,4,3,2,7,7,6,4,5,4];e.victoryPart=new e.Tone.Part((o,a)=>{const n=e.note(a.deg,5),i=[e.note(a.deg,4),e.note((a.deg+1)%7+1,4),e.note((a.deg+3)%7+1,4)];e.sf.flauta?e.sf.flauta.play(n,o,{duration:.6,gain:.6}):e.parts.flauta.triggerAttackRelease(n,"4n",o),e.sf.viola&&i.forEach((l,u)=>{e.sf.viola.play(l,o+u*.02,{duration:.4,gain:.3})})},r.map((o,a)=>({time:`0:${Math.floor(a*.75)}:${a%2*2}`,deg:o}))),e.victoryPart.start("+0.5m"),e.victoryPart.stop("+8m")},playMelodyMotif:()=>{const r=[1,3,5,6,5,3,2,1,4,5,6,5,3,2,1],o=["4n","8n","4n","8n","4n","8n","8n","4n","8n","8n","4n","8n","4n","8n","2n"];e.melodyPart&&(e.melodyPart.dispose(),e.melodyPart=null);let a=0;const n=[{transpose:0,octave:5,instrument:"flauta"},{transpose:2,octave:4,instrument:"viola"},{transpose:5,octave:5,instrument:"harmonica"},{transpose:0,octave:6,instrument:"flauta"}];e.melodyPart=new e.Tone.Part((l,u)=>{const{deg:k,dur:d,off:w,beatIndex:g}=u,F=n[a%n.length],E=(k+F.transpose-1)%7+1,y=e.note(E,F.octave),P=l+(w||0),W=g%4===0?1.2:g%2===1?.8:1,L=e.state==="action"?.05:.02;F.instrument==="flauta"&&e.sf.flauta?e.sf.flauta.play(y,e.Tone.now()+(w||0)+L,{duration:d==="2n"?1.5:d==="4n"?.6:.3,gain:.5*W}):F.instrument==="harmonica"&&e.sf.harmonica?e.sf.harmonica.play(y,e.Tone.now()+(w||0)+L,{duration:d==="2n"?1.2:d==="4n"?.5:.25,gain:.4*W}):F.instrument==="viola"&&e.sf.viola?e.sf.viola.play(y,e.Tone.now()+(w||0)+L,{duration:d==="2n"?.8:d==="4n"?.4:.2,gain:.45*W}):e.parts.flauta.triggerAttackRelease(y,d,P+L)},r.map((l,u)=>({time:`0:${Math.floor(u*.5)}:${u%2*2}`,deg:l,dur:o[u]||"8n",off:0,beatIndex:u}))),e.melodyPart.loop=!0,e.melodyPart.loopEnd="8m",e.melodyPart.start("+1m"),new e.Tone.Loop(()=>{if(a++,a%4===0){const l=e.Tone.Transport.bpm.value,u=2+Math.sin(a*.3)*3;e.Tone.Transport.bpm.rampTo(l+u,2)}},"8m").start("+1m")},stop:()=>{if(e.loop&&(e.loop.stop(),e.loop.dispose(),e.loop=null),e.melodyPart&&(e.melodyPart.stop(),e.melodyPart.dispose(),e.melodyPart=null),e.percussionPart&&(e.percussionPart.stop(),e.percussionPart.dispose(),e.percussionPart=null),e.victoryPart&&(e.victoryPart.stop(),e.victoryPart.dispose(),e.victoryPart=null),e.Tone){e.Tone.Transport.swing=0;try{e.Tone.Transport.stop()}catch{}}e.isPlaying=!1}};return B.current=e,window.sitioMusicEngine=e,()=>{e.stop()}},[]),c.useEffect(()=>{const e=B.current;e&&(m?(async()=>(await e.start("exploration"),e.playMelodyMotif()))():e.stop())},[m]);function pe(){if(!q.current)return;const e=q.current.getContext("2d"),r=80,o=80,a=Math.floor((q.current.width-r)/2),n=Math.floor((q.current.height-o)/2),i=e.getImageData(a,n,r,o),l={data:i.data,width:r,height:o,timestamp:Date.now()};A&&C.current&&V&&C.current.postMessage({type:"EXTRACT_EMBEDDING",imageData:i,templateIndex:R.current.length}),R.current.push(l),window.updateStats&&(window.updateStats("templatesCaptured",1),window.updateStats("usedAI",!0,"flag")),alert("Template capturado! Agora a detec√ß√£o usa esse padr√£o.")}function he(){if(!S.current)return;const e=S.current,r=document.createElement("canvas");r.width=e.videoWidth,r.height=e.videoHeight;const o=r.getContext("2d");_&&(o.scale(-1,1),o.translate(-r.width,0)),o.drawImage(e,0,0);const a=o.getImageData(0,0,r.width,r.height);A&&C.current&&V&&C.current.postMessage({type:"EXTRACT_EMBEDDING",imageData:a});const n={image:r.toDataURL(),timestamp:Date.now()};ee(i=>[n,...i].slice(0,5)),window.updateStats&&(window.updateStats("photosTaken",1),window.updateStats("usedCamera",!0,"flag"))}return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--theme-background,#FFF8DC)] via-[var(--theme-background,#FFF8DC)] to-[var(--theme-secondary,#8B4513)]/10 font-sans antialiased",children:[t.jsx("div",{className:"fixed inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Cpath d=%22M10 10h80v80H10z%22 fill=%22none%22 stroke=%22%23FFD700%22 stroke-width=%220.5%22 opacity=%220.1%22/%3E%3C/svg%3E')] pointer-events-none"}),j!=="game"&&t.jsx("header",{className:"sticky top-0 z-50 bg-gradient-to-r from-[var(--theme-primary,#FFD700)]/20 via-[var(--theme-secondary,#8B4513)]/20 to-[var(--theme-accent,#FF4500)]/20 backdrop-blur-lg border-b border-[var(--theme-primary,#FFD700)]/30",children:t.jsx("div",{className:"mx-auto max-w-7xl px-4 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-[var(--theme-primary,#FFD700)] to-[var(--theme-accent,#FF4500)] shadow-lg ring-2 ring-white/20 grid place-items-center text-2xl",children:"üè°"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-black bg-gradient-to-r from-[var(--theme-primary,#FFD700)] to-[var(--theme-accent,#FF4500)] bg-clip-text text-transparent drop-shadow-sm",children:"S√≠tio do Pica-Pau IA"}),t.jsx("p",{className:"text-sm sm:text-base text-[var(--theme-text,#2F4F2F)]/80 font-semibold",children:"Jogo de mem√≥ria com m√∫sica e vis√£o computacional"})]})]}),t.jsxs("nav",{className:"hidden sm:flex items-center gap-3",children:[t.jsx("button",{className:`px-4 py-2.5 rounded-xl font-bold text-sm transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[var(--theme-primary,#FFD700)]/50 ${j==="home"?"bg-[var(--theme-primary,#FFD700)] text-[var(--theme-text,#2F4F2F)] shadow-lg":"bg-white/10 text-[var(--theme-text,#2F4F2F)] hover:bg-white/20"}`,onClick:()=>v("home"),children:"üè† In√≠cio"}),t.jsx("button",{className:`px-4 py-2.5 rounded-xl font-bold text-sm transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[var(--theme-primary,#FFD700)]/50 ${j==="game"?"bg-[var(--theme-primary,#FFD700)] text-[var(--theme-text,#2F4F2F)] shadow-lg":"bg-white/10 text-[var(--theme-text,#2F4F2F)] hover:bg-white/20"}`,onClick:()=>v("game"),children:"üéÆ Jogo"}),t.jsx("button",{className:`px-4 py-2.5 rounded-xl font-bold text-sm transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[var(--theme-primary,#FFD700)]/50 ${j==="vision"?"bg-[var(--theme-primary,#FFD700)] text-[var(--theme-text,#2F4F2F)] shadow-lg":"bg-white/10 text-[var(--theme-text,#2F4F2F)] hover:bg-white/20"}`,onClick:()=>v("vision"),children:"üì∑ C√¢mera"}),t.jsx("button",{className:"px-3 py-2 rounded-xl font-bold text-sm bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Alternar tema claro/escuro",onClick:()=>M(ne()),children:D==="dark"?"üåô":"‚òÄÔ∏è"}),j!=="game"&&t.jsx("button",{className:`px-4 py-2.5 rounded-xl font-bold text-sm transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[var(--theme-primary,#FFD700)]/50 ${m?"bg-red-500 text-white shadow-lg animate-pulse":"bg-[var(--theme-secondary,#8B4513)] text-white hover:brightness-110"}`,onClick:()=>f(!m),children:m?"üîá Pausar":"üéµ M√∫sica"})]})]})})}),j==="home"&&t.jsxs("main",{className:"snap-y","aria-label":"In√≠cio",children:[t.jsx("section",{className:"snap-start","aria-labelledby":"hero-title",children:t.jsx("div",{className:"mx-auto max-w-6xl px-4 py-14 sm:py-20",children:t.jsxs("div",{className:"glass rounded-3xl p-8 sm:p-12 text-center",children:[t.jsx("h2",{id:"hero-title",className:"text-4xl sm:text-6xl font-black tracking-tight",children:"S√≠tio do Pica-Pau IA"}),t.jsx("p",{className:"mt-4 text-lg opacity-80 max-w-2xl mx-auto",children:"Jogo de mem√≥ria com trilha procedural brasileira, acess√≠vel e mobile‚Äëfirst."}),t.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-3",children:[t.jsx("button",{className:"px-6 py-3 rounded-2xl bg-black text-white font-bold hover:brightness-110 transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-400",onClick:()=>v("game"),children:"üéÆ Jogar agora"}),t.jsx("button",{className:"px-6 py-3 rounded-2xl bg-white/10 text-current border border-[var(--border)] font-semibold hover:bg-white/20 transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-400",onClick:()=>v("vision"),children:"üì∑ C√¢mera"}),t.jsx("button",{className:`px-6 py-3 rounded-2xl ${m?"bg-red-500 text-white":"bg-white/10 border border-[var(--border)]"} font-semibold hover:brightness-110 transition-colors`,onClick:async()=>{try{await B.current?.ensureStart?.()}catch{}f(e=>!e)},children:m?"üîá Parar m√∫sica":"üéµ M√∫sica"}),t.jsx("button",{"aria-label":"Alternar tema",className:"px-4 py-3 rounded-2xl bg-white/10 border border-[var(--border)]",onClick:()=>M(ne()),children:D==="dark"?"üåô":"‚òÄÔ∏è"})]}),t.jsxs("div",{className:"mt-3 flex items-center gap-2 justify-center text-sm opacity-70",children:[t.jsx("span",{"aria-hidden":!0,className:`inline-flex h-2 w-2 rounded-full ${B.current?.isPlaying?"bg-green-500":"bg-gray-400"}`}),t.jsx("span",{role:"status",children:B.current?.isPlaying?"Trilha ativa":"Trilha inativa"})]})]})})}),t.jsx("section",{className:"snap-start","aria-label":"Destaques do jogo",children:t.jsx("div",{className:"mx-auto max-w-6xl px-0 sm:px-4 py-6",children:t.jsx("div",{className:"overflow-x-auto no-scrollbar snap-x px-4",children:t.jsx("div",{className:"min-w-[120%] sm:min-w-0 grid grid-flow-col auto-cols-[80%] sm:auto-cols-[360px] gap-4",children:[{title:"M√∫sica din√¢mica",desc:"Trilha muda com seus acertos",icon:"üéµ"},{title:"IA opcional",desc:"C√¢mera com reconhecimento",icon:"ü§ñ"},{title:"Acess√≠vel",desc:"Teclado, TTS e alto contraste",icon:"‚ôø"},{title:"Mobile‚Äëfirst",desc:"R√°pido e responsivo",icon:"üì±"}].map((e,r)=>t.jsxs("article",{className:"glass rounded-2xl p-5 h-full snap-center parallax",role:"group","aria-roledescription":"slide",children:[t.jsx("div",{className:"text-3xl","aria-hidden":!0,children:e.icon}),t.jsx("h3",{className:"mt-2 text-xl font-extrabold",children:e.title}),t.jsx("p",{className:"opacity-80",children:e.desc})]},r))})})})}),t.jsx("section",{className:"snap-start","aria-label":"Escolher dificuldade",children:t.jsx("div",{className:"mx-auto max-w-6xl px-4 py-10",children:t.jsxs("div",{className:"glass rounded-3xl p-6",children:[t.jsx("h3",{className:"text-2xl font-black",children:"Dificuldade"}),t.jsx("p",{className:"opacity-80",children:"Escolha antes de come√ßar o jogo."}),t.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-3 gap-3",role:"radiogroup","aria-label":"Dificuldade",children:[{key:"easy",label:"F√°cil",hint:"3 pares, grade 3√ó2"},{key:"medium",label:"M√©dio",hint:"6 pares"},{key:"hard",label:"Dif√≠cil",hint:"12 pares"}].map(e=>t.jsxs("label",{className:`glass rounded-2xl p-4 cursor-pointer border-2 ${T===e.key?"border-emerald-400":"border-transparent"}`,children:[t.jsx("input",{type:"radio",className:"sr-only",name:"difficulty",value:e.key,checked:T===e.key,onChange:()=>{z(e.key),localStorage.setItem("memoryDifficulty",e.key)},"aria-checked":T===e.key}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl","aria-hidden":!0,children:"üÉè"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-extrabold",children:e.label}),t.jsx("div",{className:"opacity-75 text-sm",children:e.hint})]})]})]},e.key))}),t.jsxs("div",{className:"mt-5 flex gap-3 justify-end",children:[t.jsx("button",{className:"px-5 py-3 rounded-xl border border-[var(--border)] hover:bg-white/10",onClick:()=>v("vision"),children:"üì∑ Ver c√¢mera"}),t.jsx("button",{className:"px-5 py-3 rounded-xl bg-black text-white font-bold hover:brightness-110",onClick:()=>v("game"),children:"Come√ßar ‚ñ∂"})]})]})})})]}),j==="vision"&&t.jsx("div",{className:"mx-auto max-w-5xl px-4 py-4 bg-white/30 rounded-2xl backdrop-blur-md border border-[var(--theme-primary,#FFD700)]/30 mb-4",children:t.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[t.jsx("button",{className:`px-4 py-2.5 rounded-xl font-semibold transition-all ${s?"bg-red-500 text-white shadow-lg":"bg-[var(--theme-primary,#FFD700)] text-[var(--theme-text,#2F4F2F)] hover:brightness-110"} focus:outline-none focus-visible:ring-2 ring-[var(--theme-primary,#FFD700)]/50`,onClick:()=>p(!s),children:s?"üì∑ Desligar C√¢mera":"üì∑ Ligar C√¢mera"}),t.jsx("button",{className:"px-4 py-2.5 rounded-xl bg-white/10 backdrop-blur-sm text-[var(--theme-text,#2F4F2F)] font-semibold hover:bg-white/20 border border-[var(--theme-primary,#FFD700)]/30 transition-all focus:outline-none focus-visible:ring-2 ring-[var(--theme-primary,#FFD700)]/50",onClick:()=>me(e=>!e),children:_?"üîÑ Desespelhar":"üîÑ Espelhar"}),t.jsxs("button",{className:"px-4 py-2.5 rounded-xl bg-white/10 backdrop-blur-sm text-[var(--theme-text,#2F4F2F)] font-semibold hover:bg-white/20 disabled:opacity-40 border border-[var(--theme-primary,#FFD700)]/30 transition-all focus:outline-none focus-visible:ring-2 ring-[var(--theme-primary,#FFD700)]/50",disabled:!s||I.length<2,onClick:()=>{if(I.length===0)return;const r=(I.findIndex(o=>o.deviceId===$)+1)%I.length;H(I[r].deviceId)},children:["üìπ Trocar C√¢mera ",I.length>0?`(${I.findIndex(e=>e.deviceId===$)+1}/${I.length})`:""]}),t.jsx("button",{className:`px-4 py-2.5 rounded-xl font-semibold transition-all ${h?"bg-red-500 text-white shadow-lg animate-pulse":"bg-[var(--theme-secondary,#8B4513)] text-white hover:brightness-110"} focus:outline-none focus-visible:ring-2 ring-[var(--theme-primary,#FFD700)]/50`,onClick:()=>b(!h),children:h?"üé§ Desligar Microfone":"üé§ Ligar Microfone"}),t.jsx("button",{className:"px-4 py-2.5 rounded-xl bg-white/10 backdrop-blur-sm text-[var(--theme-text,#2F4F2F)] font-semibold hover:bg-white/20 border border-[var(--theme-primary,#FFD700)]/30 transition-all focus:outline-none focus-visible:ring-2 ring-[var(--theme-primary,#FFD700)]/50",onClick:()=>X(e=>!e),children:A?"ü§ñ Desativar IA":"ü§ñ Ativar IA"}),t.jsx("div",{className:"flex items-end gap-1 ml-auto bg-[var(--theme-secondary,#8B4513)]/20 rounded-lg px-3 py-2",children:de.map((e,r)=>t.jsx("div",{className:"w-1.5 bg-gradient-to-t from-[var(--theme-primary,#FFD700)] to-[var(--theme-accent,#FF4500)] rounded-t shadow-sm",style:{height:`${e}px`}},r))})]})}),t.jsxs("div",{className:"mx-auto max-w-5xl px-4 pb-12",children:[j==="game"&&t.jsx("div",{className:"memory-game",children:t.jsx(c.Suspense,{fallback:t.jsx("p",{children:"Carregando jogo..."}),children:t.jsx(ke,{musicPlaying:m,setMusicPlaying:f})})}),j==="vision"&&(s?t.jsxs("div",{className:"camera-view mx-auto max-w-3xl bg-white/30 backdrop-blur-md border border-[var(--theme-primary,#FFD700)]/30 rounded-2xl p-4 shadow-xl",children:[t.jsxs("div",{style:{position:"relative"},children:[t.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,width:480,height:360,style:{borderRadius:"1rem",boxShadow:"0 2px 12px rgba(0,0,0,0.25)",marginBottom:"0.5rem"}}),t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",width:220,height:160,border:"3px dashed rgba(255,215,0,0.7)",borderRadius:"12px",pointerEvents:"none"}})]}),t.jsx("canvas",{ref:q,width:480,height:360,style:{display:"block",margin:"0.5rem auto",borderRadius:"0.5rem"}}),t.jsx("div",{id:"lowLightHint",style:{display:"none"}}),G&&t.jsx("div",{style:{background:"#FFD700",color:"#000",border:"3px solid #000",borderRadius:"10px",padding:"0.5rem 0.75rem",fontWeight:900,textAlign:"center",margin:"0.5rem auto"},children:"üí° Est√° um pouco escuro. Aproxime a carta e use um ambiente mais iluminado."}),t.jsxs("div",{style:{display:"flex",gap:".5rem",justifyContent:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:pe,className:"small-btn",children:"Capturar Template"}),t.jsx("button",{onClick:he,className:"small-btn",children:"Tirar Foto"}),t.jsx("button",{onClick:()=>{R.current=[],ee([]),alert("Templates e fotos limpos")},className:"small-btn",children:"Limpar Tudo"}),t.jsx("a",{href:"./printable-cards.html",target:"_blank",rel:"noopener",className:"small-btn",children:"üìÑ Cartas imprim√≠veis"})]}),t.jsxs("p",{style:{fontWeight:700,textShadow:"0 2px 6px rgba(0,0,0,.35)"},children:["Cartas detectadas: ",Q.length>0?Q.join(", "):"Nenhuma"," | AI: ",V?"Pronto ‚úÖ":"Carregando ‚è≥"]}),Z.length>0&&t.jsxs("div",{style:{marginTop:"1rem"},children:[t.jsx("h4",{style:{fontWeight:700,textShadow:"0 2px 6px rgba(0,0,0,.35)"},children:"√öltimas Fotos:"}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:Z.map((e,r)=>t.jsx("img",{src:e.image,alt:`Snapshot ${r+1}`,style:{width:"80px",height:"60px",borderRadius:"0.5rem",objectFit:"cover"}},e.timestamp))})]})]}):t.jsx("div",{className:"camera-placeholder text-center mx-auto max-w-3xl bg-white/30 backdrop-blur-md border border-[var(--theme-primary,#FFD700)]/30 rounded-2xl p-10 shadow-xl",children:t.jsx("p",{className:"font-extrabold text-[var(--theme-text,#2F4F2F)]",children:'Clique em "Ligar C√¢mera" para come√ßar!'})}))]}),j!=="game"&&t.jsx("section",{className:"relative mt-8 mb-8",children:t.jsx("div",{className:"mx-auto max-w-6xl px-4",children:t.jsxs("div",{className:"bg-gradient-to-br from-[var(--theme-primary,#FFD700)]/10 to-[var(--theme-secondary,#8B4513)]/10 backdrop-blur-md rounded-3xl border border-[var(--theme-primary,#FFD700)]/20 p-6 shadow-xl",children:[t.jsx("h3",{className:"text-2xl font-bold text-[var(--theme-text,#2F4F2F)] text-center mb-4",children:"üéõÔ∏è Controles Avan√ßados"}),t.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[t.jsx("button",{className:"px-4 py-2 rounded-xl bg-[var(--theme-primary,#FFD700)] text-[var(--theme-text,#2F4F2F)] font-semibold hover:bg-[var(--theme-accent,#FF4500)] transition-all",onClick:()=>f(e=>!e),children:m?"üîá Parar M√∫sica":"üéµ Iniciar M√∫sica"}),t.jsx("button",{className:"px-4 py-2 rounded-xl bg-[var(--theme-secondary,#8B4513)] text-white font-semibold hover:bg-[var(--theme-accent,#FF4500)] transition-all",onClick:()=>X(e=>!e),children:A?"ü§ñ IA Ativada":"üîß IA Desativada"}),t.jsx("button",{className:"px-4 py-2 rounded-xl bg-white/20 backdrop-blur-sm text-[var(--theme-text,#2F4F2F)] font-semibold hover:bg-white/30 border border-[var(--theme-primary,#FFD700)]/30 transition-all",onClick:()=>alert("Funcionalidades em desenvolvimento!"),children:"‚öôÔ∏è Configura√ß√µes"})]})]})})}),j!=="game"&&t.jsx("footer",{className:"relative mt-2 border-t border-[var(--theme-primary,#FFD700)]/30",children:t.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-6 text-[var(--theme-text,#2F4F2F)] text-sm flex flex-wrap items-center justify-between gap-2",children:[t.jsxs("span",{className:"inline-flex items-center gap-2 font-extrabold text-[var(--theme-text,#2F4F2F)] text-with-bg",children:[t.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[var(--theme-primary,#FFD700)] shadow-sm"})," üë©‚Äçüé® Malie ‚Ä¢ ‚ö° Tauan ‚Ä¢ üßô‚Äç‚ôÄÔ∏è Carla ‚Ä¢ üëµ Vov√≥ Jane"]}),t.jsx("span",{className:"font-extrabold text-with-bg",children:"üè´ Projeto para Feira de Ci√™ncias - Col√©gio Meta, Sobradinho-DF"})]})})]})}xe.createRoot(document.getElementById("root")).render(t.jsx(c.StrictMode,{children:t.jsx(Ne,{})}));
