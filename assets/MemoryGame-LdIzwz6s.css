.memory-container{--card-size: 128px;--cols: 3;margin:0;padding:0;position:relative;min-height:100vh;min-height:100dvh;box-sizing:border-box;background:radial-gradient(1200px 800px at 20% 10%,rgba(255,215,0,.25),transparent 60%),radial-gradient(1000px 700px at 80% 30%,rgba(255,69,0,.18),transparent 60%),linear-gradient(135deg,#fff8dc,#fde68a 40%,#f59e0b);background-attachment:fixed}.game-header{text-align:center;margin-bottom:1rem;padding:1rem;background:gold;border-radius:16px;border:3px solid #000000}.game-header .game-title{color:#000;font-size:1.8rem;font-weight:900;margin:0 0 .5rem}.game-header p{color:#000;font-weight:700;margin:0}.memory-layout{display:grid;grid-template-columns:1fr 300px;align-items:start;gap:1.5rem;padding:1rem 0}.memory-layout.only-grid{grid-template-columns:1fr;place-items:center;padding:1rem}.grid{display:grid;gap:clamp(8px,2.5vw,14px);justify-content:center;grid-template-columns:repeat(var(--cols),minmax(48px,var(--card-size)));will-change:contents}.difficulty-easy{--card-size: 140px}.difficulty-medium{--card-size: 120px}.difficulty-hard{--card-size: 100px}.difficulty-easy .grid{grid-template-columns:repeat(3,var(--card-size))}.difficulty-medium .grid{grid-template-columns:repeat(4,var(--card-size))}.difficulty-hard .grid{grid-template-columns:repeat(6,var(--card-size))}.side-panel{display:flex;flex-direction:column;align-items:stretch;background:#f9f9f9;border:3px solid #000;border-radius:16px;padding:1rem;position:sticky;top:1rem;box-shadow:0 8px 25px #00000026}.side-panel h3{font-size:1.4rem;font-weight:900;text-align:center;margin-top:0;margin-bottom:1rem;color:#000;padding-bottom:.75rem;border-bottom:3px solid #e0e0e0}.side-panel h4{font-size:1.1rem;font-weight:700;margin-top:1.5rem;margin-bottom:.75rem;color:#333;padding-left:.5rem;border-left:4px solid var(--theme-primary, #FFD700)}.side-panel .game-stats,.side-panel .difficulty-selector,.side-panel .game-controls,.side-panel .navigation-controls{display:flex;flex-direction:column;gap:.75rem;width:100%}.side-panel .stat-item{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#fff;border:2px solid #e0e0e0;border-radius:8px;font-weight:700}.side-panel .stat-value{font-weight:900;color:var(--theme-accent, #FF4500)}.side-panel .difficulty-selector .difficulty-btn,.side-panel .game-controls .control-btn,.side-panel .navigation-controls .control-btn,.side-panel .game-footer .control-btn{width:100%;justify-content:center;padding:.75rem;border:2px solid #000;border-radius:8px;font-weight:700;cursor:pointer;transition:all .3s ease;background:#fff;color:#000}.primary-btn{background:linear-gradient(135deg,gold,#ff4500)!important;color:#2f4f2f!important;font-weight:800!important}.secondary-btn{background:linear-gradient(135deg,#8b4513,sienna)!important;color:#fff!important}.game-footer{margin-top:1rem;padding-top:1rem;border-top:2px solid #f0f0f0;display:flex;flex-direction:column;gap:.75rem}.card{position:relative;width:var(--card-size);height:var(--card-size);border-radius:20px;cursor:pointer;perspective:1000px;transition:all .3s ease;-webkit-tap-highlight-color:transparent;touch-action:manipulation;-webkit-backdrop-filter:saturate(1.1);backdrop-filter:saturate(1.1);will-change:transform,filter;transform:translateZ(0)}.card:hover{transform:translateY(-4px) scale(1.02);filter:brightness(1.1)}.card:active{transform:scale(.95)}.card .front,.card .back{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:20px;font-weight:900;font-size:.9rem;backface-visibility:hidden;transform-style:preserve-3d;transition:all .6s ease;text-shadow:0 2px 6px rgba(0,0,0,.35);box-sizing:border-box;border:2px solid}.card .front{background:linear-gradient(135deg,#fffacd,#ffd70066);border-color:var(--theme-accent, #FF4500);color:var(--theme-text, #2F4F2F);transform:rotateY(180deg);box-shadow:inset 0 0 0 2px #ffffff80,inset 0 -8px 20px #0000001a,0 8px 25px #ffd7004d}.card .back{background:linear-gradient(135deg,#8b4513,#ffd70033);border-color:var(--theme-primary, #FFD700);transform:rotateY(0);color:var(--theme-primary, #FFD700);box-shadow:0 8px 25px #0000004d,inset 0 0 0 1px #ffd7004d}.card .front img{width:calc(var(--card-size) * .7);height:calc(var(--card-size) * .7);border-radius:16px;box-shadow:0 6px 20px #0000004d;margin-bottom:.5rem;-o-object-fit:cover;object-fit:cover;border:2px solid rgba(255,255,255,.6)}.card .front .name{font-size:.8rem;font-weight:800;letter-spacing:.5px;text-align:center;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 4px;line-height:1.2;color:var(--theme-text, #2F4F2F);text-shadow:1px 1px 3px rgba(255,255,255,.8)}.card .back{font-size:2.4rem;line-height:1;display:flex;align-items:center;justify-content:center;text-shadow:2px 2px 8px rgba(0,0,0,.5)}.sitio-logo{display:flex;flex-direction:column;align-items:center;gap:.25rem}.casa-icon{font-size:2.2rem;text-shadow:2px 2px 8px rgba(0,0,0,.5);filter:drop-shadow(0 0 10px var(--theme-primary, #FFD700))}.sitio-text{font-size:.85rem;font-weight:800;letter-spacing:1px;text-transform:uppercase;color:var(--theme-primary, #FFD700);text-shadow:1px 1px 4px rgba(0,0,0,.7)}.card.flipped .front{transform:rotateY(0)}.card.flipped .back{transform:rotateY(180deg)}.card.matched{animation:sitioMatch .8s ease-out}@keyframes sitioMatch{0%{transform:scale(1)}50%{transform:scale(1.15) rotate(5deg);box-shadow:0 0 30px var(--theme-primary, #FFD700)}to{transform:scale(1);filter:brightness(1.2) saturate(1.3)}}.card.miss{animation:sitioMiss .5s ease-in-out}@keyframes sitioMiss{0%,to{transform:translate(0)}25%{transform:translate(-8px) rotate(-2deg)}75%{transform:translate(8px) rotate(2deg)}}.celebration-overlay{position:fixed;inset:0;background:radial-gradient(circle at 50% 40%,rgba(255,215,0,.25) 0%,transparent 65%),radial-gradient(circle at 20% 80%,rgba(255,69,0,.25) 0%,transparent 70%);display:flex;align-items:center;justify-content:center;z-index:1000;animation:celebrationFade 1s ease-out;pointer-events:none}.celebration-text{font-size:3rem;font-weight:900;color:var(--theme-primary, #FFD700);text-shadow:3px 3px 0 var(--theme-accent, #FF4500),6px 6px 20px rgba(0,0,0,.5);animation:celebrationBounce 1s ease-out;text-align:center}@keyframes celebrationFade{0%{opacity:0}50%{opacity:1}to{opacity:0}}@keyframes celebrationBounce{0%{transform:scale(.5) rotate(-10deg)}50%{transform:scale(1.2) rotate(5deg)}to{transform:scale(1) rotate(0)}}@media (max-width: 1024px){.memory-layout{grid-template-columns:1fr}.side-panel{position:static;margin-top:1.5rem}.difficulty-easy{--card-size: 120px}.difficulty-medium{--card-size: 100px}.difficulty-hard{--card-size: 85px}.difficulty-medium .grid{grid-template-columns:repeat(3,var(--card-size))}.difficulty-hard .grid{grid-template-columns:repeat(4,var(--card-size))}}@media (max-width: 768px){.difficulty-easy{--card-size: 110px}.difficulty-medium{--card-size: 90px}.difficulty-hard{--card-size: 75px}.difficulty-hard .grid{grid-template-columns:repeat(3,var(--card-size))}}@media (max-width: 480px){.difficulty-easy{--card-size: 90px}.difficulty-medium{--card-size: 75px}.difficulty-hard{--card-size: 65px}.memory-container{padding:.5rem}.game-header .game-title{font-size:1.5rem}.grid{gap:.5rem}}.music-btn.playing{background:linear-gradient(135deg,#f44,#f66);animation:musicPulse 2s ease-in-out infinite}@keyframes musicPulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.pause-overlay{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:2000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.pause-box{padding:2rem 4rem;background:#fff;color:#000;border:4px solid #000;border-radius:16px;font-size:2rem;font-weight:900}.audio-settings-overlay{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:2000}.audio-settings-modal{background:#ffffffd9;-webkit-backdrop-filter:blur(12px) saturate(140%);backdrop-filter:blur(12px) saturate(140%);padding:1.5rem;border-radius:18px;border:1px solid rgba(0,0,0,.15);display:flex;flex-direction:column;gap:.9rem;color:#111;box-shadow:0 18px 44px #00000059}.audio-settings-modal h3{margin-top:0;text-align:center}.audio-settings-modal label{display:flex;align-items:center;gap:.5rem}.exit-btn{position:fixed;top:max(12px,env(safe-area-inset-top));left:12px;z-index:3000;padding:.6rem .9rem;border-radius:12px;border:1px solid rgba(0,0,0,.25);background:#ffffffe6;color:#111;font-weight:800;box-shadow:0 10px 24px #00000040;-webkit-backdrop-filter:blur(8px) saturate(130%);backdrop-filter:blur(8px) saturate(130%)}.memory-container.immersive .game-header,.memory-container.immersive .side-panel{display:none!important}:root{--theme-primary: #FFD700;--theme-secondary: #8B4513;--theme-accent: #FF4500;--theme-background: #FFF8DC;--theme-text: #2F4F2F;--theme-card: #FFFACD;--theme-cardBg: #FFFACD}.theme-overlay{position:fixed;inset:0;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .3s ease}.theme-modal{background:linear-gradient(135deg,var(--theme-background) 0%,var(--theme-primary)/20 100%);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:2px solid var(--theme-primary);border-radius:2rem;padding:2rem;max-width:700px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 20px 40px #0006}.theme-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:2px solid var(--theme-primary);padding-bottom:1rem}.theme-header h2{margin:0;color:var(--theme-text);font-size:1.5rem;font-weight:700;font-weight:900;text-shadow:0 2px 10px rgba(0,0,0,.5)}.theme-description{color:#fffc;margin-bottom:2rem;text-align:center;font-size:1.1rem}.themes-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:2rem}.theme-card{border-radius:.75rem;padding:1.5rem;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.theme-card:hover{transform:translateY(-3px);box-shadow:0 8px 30px #0000004d}.theme-card.active{transform:translateY(-2px);box-shadow:0 8px 25px #4ade804d}.theme-preview{display:flex;gap:.5rem;align-items:center;justify-content:center;padding:1rem;border-radius:.5rem;margin-bottom:1rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.theme-color-dot{width:20px;height:20px;border-radius:50%;box-shadow:0 2px 8px #0000004d}.theme-name{text-align:center;font-weight:700;font-size:1.1rem;text-shadow:0 2px 6px rgba(0,0,0,.3);margin-bottom:.5rem}.theme-active-badge{position:absolute;top:.75rem;right:.75rem;background:var(--theme-primary);color:#000;font-size:.8rem;font-weight:900;padding:.25rem .75rem;border-radius:1rem;animation:badgePulse 2s ease-in-out infinite}.theme-footer{text-align:center;color:#ffffffb3;font-style:italic;border-top:1px solid rgba(255,255,255,.1);padding-top:1rem;font-size:.95rem}.memory-container .card{background:var(--theme-cardBg);border-color:#ffffff26}.memory-container .card.matched{background:linear-gradient(145deg,var(--theme-primary),transparent);box-shadow:0 4px 20px #4ade804d}.memory-container .small-btn{border-color:var(--theme-primary);color:var(--theme-text)}.memory-container .small-btn:hover{background:var(--theme-primary);color:#000;box-shadow:0 4px 15px #4ade8066}.memory-container .small-btn.active{background:var(--theme-primary);color:#000;box-shadow:0 0 20px var(--theme-primary)}.memory-container .celebration-text{color:var(--theme-primary);text-shadow:0 4px 20px var(--theme-primary)}.memory-container [style*="color:#34d399"]{color:var(--theme-primary)}.memory-container [style*="color:#fbbf24"]{color:var(--theme-secondary)}.memory-container [style*="color:#a78bfa"],.memory-container [style*="color:#60a5fa"]{color:var(--theme-accent)}@media (max-width: 640px){.theme-modal{padding:1.5rem;margin:1rem}.themes-grid{grid-template-columns:1fr;gap:1rem}.theme-card{padding:1.25rem}}.leaderboard-overlay{position:fixed;inset:0;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .3s ease}.leaderboard-modal{background:var(--theme-background);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);border-radius:1rem;padding:2rem;max-width:600px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 20px 40px #0006}.leaderboard-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:1rem}.leaderboard-header h2{margin:0;color:var(--theme-text);font-weight:900;text-shadow:0 2px 10px rgba(0,0,0,.5)}.name-input-section{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:.75rem;padding:1.5rem;margin-bottom:2rem;text-align:center}.name-input-section h3{color:var(--theme-primary);margin:0 0 1rem;font-size:1.2rem;text-shadow:0 2px 8px rgba(74,222,128,.3)}.score-preview{display:flex;gap:1rem;justify-content:center;margin-bottom:1rem;flex-wrap:wrap}.score-preview span{background:#ffffff1a;padding:.5rem 1rem;border-radius:1rem;color:var(--theme-text);font-weight:600;font-size:.9rem}.name-input-group{display:flex;gap:.75rem;align-items:center;justify-content:center;flex-wrap:wrap}.name-input-group input{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:.5rem;padding:.75rem 1rem;color:var(--theme-text);font-size:1rem;min-width:200px;outline:none;transition:all .3s ease}.name-input-group input:focus{border-color:var(--theme-primary);box-shadow:0 0 0 3px #4ade8033}.name-input-group button{background:var(--theme-primary);border:none;border-radius:.5rem;padding:.75rem 1.5rem;color:#000;font-weight:700;cursor:pointer;transition:all .3s ease}.name-input-group button:disabled{opacity:.5;cursor:not-allowed}.name-input-group button:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 4px 15px #4ade8066}.leaderboard-list{margin-bottom:2rem}.empty-leaderboard{text-align:center;padding:3rem 1rem;color:#fff9}.empty-leaderboard p:first-child{font-size:1.2rem;font-weight:600;margin-bottom:.5rem}.leaderboard-entry{display:flex;align-items:center;gap:1rem;padding:1rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:.75rem;margin-bottom:.75rem;transition:all .3s ease}.leaderboard-entry:hover{transform:translateY(-1px);box-shadow:0 4px 20px #0003}.leaderboard-entry.podium{background:linear-gradient(135deg,#ffd7001a,#ffffff0d);border-color:#ffd7004d}.position{font-size:1.5rem;font-weight:900;min-width:50px;text-align:center}.player-info{flex:1}.player-name{font-size:1.1rem;font-weight:700;color:var(--theme-text);margin-bottom:.25rem}.player-details{display:flex;gap:.5rem;align-items:center;font-size:.85rem;color:#ffffffb3}.player-stats{text-align:right}.score{font-size:1.2rem;font-weight:900;color:var(--theme-primary);text-shadow:0 2px 8px rgba(74,222,128,.3)}.sub-stats{display:flex;gap:.5rem;justify-content:flex-end;font-size:.8rem;color:#fff9;margin-top:.25rem}.leaderboard-footer{text-align:center;color:#ffffffb3;border-top:1px solid rgba(255,255,255,.1);padding-top:1rem}.leaderboard-footer p{margin:.5rem 0;font-size:.9rem}@media (max-width: 640px){.leaderboard-modal{padding:1.5rem;margin:1rem}.score-preview{flex-direction:column;gap:.5rem}.name-input-group{flex-direction:column;width:100%}.name-input-group input{min-width:auto;width:100%}.leaderboard-entry{padding:.75rem}.position{min-width:40px;font-size:1.2rem}.player-name,.score{font-size:1rem}}
